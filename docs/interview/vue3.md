# Vue3 面试题解析

本文整理了 Vue3 常见的面试题及其详细解答，基于源码级别的分析。

## 响应式系统

### Vue3 相比 Vue2 的响应式系统有哪些改进？

Vue3 使用 ES6 的 Proxy 替代了 Vue2 中的 Object.defineProperty，主要改进有：

1. 可以检测到对象属性的添加和删除
2. 可以检测数组索引和长度的变化
3. 可以监听 Map、Set、WeakMap、WeakSet
4. 性能更好，不需要初始化时递归遍历所有属性

### Vue3 的响应式 API 有哪些？

- reactive: 创建一个响应式对象
- ref: 创建一个响应式的值引用
- computed: 创建一个计算属性
- watch/watchEffect: 侦听响应式数据的变化
- readonly: 创建一个只读的响应式对象
- toRefs/toRef: 将响应式对象转换为普通对象，其中每个属性都是一个 ref

## 组合式 API

### 什么是组合式 API，它解决了什么问题？

组合式 API (Composition API) 是 Vue3 引入的新特性，主要解决了以下问题：

1. 更好的代码组织：相关功能的代码可以放在一起，而不是分散在不同的选项中
2. 更好的代码复用：通过组合函数（composables）可以更容易地复用逻辑
3. 更好的 TypeScript 支持：组合式 API 天然对 TypeScript 友好
4. 更小的打包体积：支持树摇（tree-shaking）

### setup 函数的执行时机是什么？

setup 函数是在组件实例创建之后、初始化 props 之后、beforeCreate 钩子之前被调用。由于 setup 在组件的生命周期很早就被调用，此时组件实例尚未创建，因此在 setup 中没有 this。

## 性能优化

### Vue3 在编译优化方面做了哪些改进？

1. 静态提升：将静态节点提升到渲染函数之外，避免重复创建
2. 预字符串化：将静态节点序列化为字符串，减少虚拟节点的创建
3. 缓存事件处理函数：避免组件重新渲染时重新创建内联函数
4. 块级别更新：引入了块（Block）的概念，只需要追踪动态节点
5. SSR 优化：支持部分水合（hydration）

> 本文档将持续更新，添加更多面试题及其源码解析。
